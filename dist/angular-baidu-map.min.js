!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("angular"));else if("function"==typeof define&&define.amd)define(["angular"],t);else{var n=t("object"==typeof exports?require("angular"):e.angular);for(var a in n)("object"==typeof exports?exports:e)[a]=n[a]}}(this,function(e){return function(e){function t(a){if(n[a])return n[a].exports;var o=n[a]={exports:{},id:a,loaded:!1};return e[a].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ngBaiduMap=void 0;var o=n(1),r=a(o),i=n(2),l=n(3),c=n(4),u=n(5),d=n(6),s=n(7);t.ngBaiduMap=function(){var e="baiduMap";return(0,c.def)(e,{restrict:"E",scope:{options:"=",ak:"@",offline:"=",onMapLoaded:"&"},link:function(e,t,n){var a=r.default.extend({},i.defaultOpts,e.options),o=r.default.extend({},i.defaultOfflineOpts,e.offline);e.offlineWords=o.txt,(0,l.validator)(e.ak,"ak must not be empty"),(0,l.validator)(a.center,"options.center must be set"),(0,l.validator)(a.center.longitude,"options.center.longitude must be set"),(0,l.validator)(a.center.latitude,"options.center.latitude must be set"),(0,l.validator)(a.city,"options.city must be set"),(0,u.loader)(e.ak,o,function(){var n=(0,s.createInstance)(a,t);e.onMapLoaded({BMap:BMap,BMapLib:BMapLib,map:n});var o=[];(0,s.redrawMarkers)(n,o,a),e.$watch("options.center",function(t,r){a=e.options,n.centerAndZoom(new BMap.Point(a.center.longitude,a.center.latitude),a.zoom),(0,s.redrawMarkers)(n,o,a)},!0),e.$watch("options.markers",function(e,t){(0,s.redrawMarkers)(n,o,a)},!0)}),e.divStyle=d.divStyle,e.labelStyle=d.labelStyle,setTimeout(function(){var t=document.querySelector("baidu-map div label");e.labelStyle.marginTop=t.clientHeight/-2+"px",e.labelStyle.marginLeft=t.clientWidth/-2+"px",e.$apply()})},template:'<div ng-style="divStyle"><label ng-style="labelStyle">{{ offlineWords }}</label></div>'}),e}()},function(t,n){t.exports=e},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.defaultOpts={navCtrl:!0,scaleCtrl:!0,overviewCtrl:!0,enableScrollWheelZoom:!0,zoom:10},t.defaultOfflineOpts={retryInterval:3e4,txt:"OFFLINE"}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.validator=function(e,t){if(!e)throw new Error(t)}},function(e,t,n){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.def=void 0;var o=n(1),r=a(o);t.def=function(e,t){r.default.module(e,[]).directive(e,[function(){return t}])}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.loader=function(e,t,n){var a="//api.map.baidu.com/api?v=2.0&ak="+e+"&callback=baidumapinit&s="+("https:"===location.protocol?1:0),o="//api.map.baidu.com/library/Heatmap/2.0/src/Heatmap_min.js",r=window.baiduMap;if(r&&"loading"===r.status)return r.callbacks.push(n);if(r&&"loaded"===r.status)return n();window.baiduMap={status:"loading",callbacks:[]},window.baidumapinit=function(){function e(){window.baiduMap.status="loaded",n(),window.baiduMap.callbacks.forEach(function(e){return e()}),window.baiduMap.callbacks=[]}var t=document.createElement("script");t.type="text/javascript",t.src=o,t.onload=e,document.body.appendChild(t)};var i=function e(){var n=document.createElement("script");n.type="text/javascript",n.src=a,n.onerror=function(){Array.prototype.slice.call(document.querySelectorAll("baidu-map div")).forEach(function(e){e.style.opacity=1}),document.body.removeChild(n),setTimeout(e,t.retryInterval)},document.body.appendChild(n)};i()}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.divStyle={width:"100%",height:"100%",backgroundColor:"#E6E6E6",position:"relative",opacity:0},t.labelStyle={fontSize:"30px",position:"absolute",top:"50%",marginTop:0,left:"50%",marginLeft:0}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=(t.createInstance=function(e,t){var n=new BMap.Map(t[0]);return n.centerAndZoom(new BMap.Point(e.center.longitude,e.center.latitude),e.zoom),e.navCtrl&&n.addControl(new BMap.NavigationControl),e.scaleCtrl&&n.addControl(new BMap.ScaleControl),e.overviewCtrl&&n.addControl(new BMap.OverviewMapControl),e.enableScrollWheelZoom&&n.enableScrollWheelZoom(),n.setCurrentCity(e.city),n},t.createMarker=function(e,t){if(e.icon){var n=new BMap.Icon(e.icon,new BMap.Size(e.width,e.height));return new BMap.Marker(t,{icon:n})}return new BMap.Marker(t)});t.redrawMarkers=function(e,t,a){t.forEach(function(t){var n=t.marker,a=t.listener;n.removeEventListener("click",a),e.removeOverlay(n)}),t.length=0,a.markers&&a.markers.forEach(function(a){var o=n(a,new BMap.Point(a.longitude,a.latitude));e.addOverlay(o);var r={marker:o,listener:null};if(t.push(r),a.title||a.content){var i="<p>"+(a.title||"")+"</p><p>"+(a.content||"")+"</p>",l=new BMap.InfoWindow(i,{enableMessage:!!a.enableMessage});r.listener=function(){this.openInfoWindow(l)},o.addEventListener("click",r.listener)}})}}])});